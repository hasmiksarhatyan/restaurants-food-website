<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head>
    <meta charset="UTF-8">
    <title>Restaurant Owner Page</title>
</head>
<body>
<th:block th:if="${currentUser == null}">
    <a href="/users/add">Register</a><br>
</th:block>

<th:block th:if="${currentUser != null}">
    <a href="/logout"> Sign Out</a>
</th:block>

<table>

    <tr>
        <th>Name</th>
        <th>Address</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Delivery price</th>
        <th>Restaurant Category</th>
        <th>Restaurant Pictures</th>
    </tr>

    <tr th:each="restaurant:${restaurants.content}">
        <td th:text="${restaurant.name}"></td>
        <td th:text="${restaurant.address}"></td>
        <span style="color: red" th:if="${error!=null}" th:text="${error}"></span><br
            th:if="${error!=null}">
        <td th:text="${restaurant.email}"></td>
        <td th:text="${restaurant.phone}"></td>
        <td th:text="${restaurant.deliveryPrice}"></td>
        <td th:text="${restaurant.restaurantCategoryOverview.name}"></td>

        <td th:if="${restaurant.pictures != null && !restaurant.pictures.isEmpty()}"
            th:each="picture:${restaurant.pictures}">
            <img th:src="@{/restaurants/getImages(fileName=${picture})}"></td>
        <img th:if="${restaurant.pictures == null || restaurant.pictures.isEmpty()}" src="">


        <td><a th:href="@{'/restaurants/delete/'+ ${restaurant.id}}">Delete the restaurant</a></td>
        <br th:if="${errorMessageId!=null}">
        <span style="color: red" th:if="${errorMessageId!=null}" th:text="${errorMessageId}"></span>

        <td><a th:href="@{'/restaurants/edit/' + ${restaurant.id}}">Edit the restaurant</a></td>
        <br th:if="${errorMessageEdit!=null}">
        <span style="color: red" th:if="${errorMessageEdit!=null}" th:text="${errorMessageEdit}"></span>

    </tr>


</table>

<a href="/restaurants/add">Add New Restaurant</a><br>
<a href="/restaurantsCategory/add">Add a New Type of Restaurant</a><br>

<div th:if="${restaurants.totalPages>0}" class="pagination"
     th:each="pageNumber:${pageNumbers}">
    <a th:href="@{/restaurants(size=${restaurants.size}, page=${pageNumber})}"
       th:text="${pageNumber}"
       th:class="${pageNumber==restaurants.number+1}? active"></a>
</div>

<span th:if="${errorMessageEdit != null}" th:text="${errorMessageEdit}"></span>

</body>
</html>